# TASK-0025 Redãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†å ±å‘Š

## ãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœ

### å®Ÿè¡Œæ—¥æ™‚
2025-01-20

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰
```bash
npm test -- src/pages/__tests__/DisplayPage.test.tsx --run
```

### ãƒ†ã‚¹ãƒˆçµæœã‚µãƒãƒªãƒ¼

- **ç·ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹æ•°**: 11
- **æˆåŠŸ**: 6
- **å¤±æ•—**: 5
- **æˆåŠŸç‡**: 54.5%

### æˆåŠŸã—ãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ (6ä»¶)

1. âœ… **æ­£å¸¸ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹**
   - ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã¨ã—ã¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹

2. âœ… **URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒãªã„å ´åˆã¯ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹**
   - æ—¢å­˜ã®Navigateãƒ­ã‚¸ãƒƒã‚¯ãŒæ­£ã—ãå‹•ä½œ

3. âœ… **ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹**
   - ãƒ†ã‚¹ãƒˆãƒ­ã‚¸ãƒƒã‚¯ãŒé©åˆ‡ã«å‹•ä½œï¼ˆãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãªã—æ¡ä»¶ã‚‚è¨±å®¹ï¼‰

4. âœ… **ãƒ‡ã‚³ãƒ¼ãƒ‰æˆåŠŸæ™‚ã«ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹**
   - .display-pageã‚¯ãƒ©ã‚¹ãŒå­˜åœ¨ã™ã‚‹ãŸã‚æˆåŠŸ

5. âœ… **æ—¥æœ¬èªï¼ˆã²ã‚‰ãŒãªã€ã‚«ã‚¿ã‚«ãƒŠã€æ¼¢å­—ï¼‰ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹**
   - ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã§ã‚‚ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¯æˆåŠŸ

6. âœ… **è¤‡æ•°å›ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãŒç™ºç”Ÿã—ãªã„**
   - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒã‚¦ãƒ³ãƒˆ/ã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆãŒæ­£å¸¸

### å¤±æ•—ã—ãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ (5ä»¶)

#### 1. âŒ **ä¸æ­£ãªURLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å ´åˆã¯ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤º**
```
AssertionError: expected null to be truthy
```
**åŸå› **: ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯ãŒæœªå®Ÿè£…
**ä¿®æ­£å†…å®¹ï¼ˆGreenãƒ•ã‚§ãƒ¼ã‚ºï¼‰**: ãƒ‡ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼æ™‚ã®ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã‚’è¿½åŠ 

#### 2. âŒ **ã€Œæ–°ã—ã„è¨€è‘‰ã‚’è´ˆã‚‹ã€ãƒœã‚¿ãƒ³ã§ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹**
```
Unable to find role="button" and name `/æ–°ã—ã„è¨€è‘‰ã‚’è´ˆã‚‹/i`
```
**åŸå› **: ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ãŒæœªå®Ÿè£…
**ä¿®æ­£å†…å®¹ï¼ˆGreenãƒ•ã‚§ãƒ¼ã‚ºï¼‰**: Buttonã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿½åŠ 

#### 3. âŒ **å¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒé…ç½®ã•ã‚Œã¦ã„ã‚‹**
```
AssertionError: expected null to be truthy
```
**åŸå› **: .containerã‚¯ãƒ©ã‚¹ã¾ãŸã¯[class*="container"]ãŒå­˜åœ¨ã—ãªã„
**ä¿®æ­£å†…å®¹ï¼ˆGreenãƒ•ã‚§ãƒ¼ã‚ºï¼‰**: CSS Modulesã§containerã‚¯ãƒ©ã‚¹ã‚’å®šç¾©

#### 4. âŒ **ç©ºã®wordãƒ‡ãƒ¼ã‚¿ã®å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¤º**
```
AssertionError: expected null to be truthy
```
**åŸå› **: ãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ãŒæœªå®Ÿè£…
**ä¿®æ­£å†…å®¹ï¼ˆGreenãƒ•ã‚§ãƒ¼ã‚ºï¼‰**: decodeGiftWordDataã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çµæœã‚’åˆ©ç”¨

#### 5. âŒ **ç©ºã®meaningãƒ‡ãƒ¼ã‚¿ã®å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¤º**
```
AssertionError: expected null to be truthy
```
**åŸå› **: ãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ãŒæœªå®Ÿè£…
**ä¿®æ­£å†…å®¹ï¼ˆGreenãƒ•ã‚§ãƒ¼ã‚ºï¼‰**: decodeGiftWordDataã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çµæœã‚’åˆ©ç”¨

## æœŸå¾…ã•ã‚Œã‚‹å¤±æ•—ã®é”æˆçŠ¶æ³

### âœ… é”æˆã—ãŸæœŸå¾…ã•ã‚Œã‚‹å¤±æ•—

1. **ã€Œæ–°ã—ã„è¨€è‘‰ã‚’è´ˆã‚‹ã€ãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚‰ãªã„** - âœ… é”æˆ
2. **URLãƒ‡ã‚³ãƒ¼ãƒ‰å‡¦ç†ãŒæœªå®Ÿè£…** - âœ… é”æˆï¼ˆã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸æœªè¡¨ç¤ºï¼‰
3. **CSS Modulesã®ã‚¯ãƒ©ã‚¹åãŒæœªå®šç¾©** - âœ… é”æˆ

### âš ï¸ æƒ³å®šå¤–ã®æˆåŠŸ

ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆã¯å¤±æ•—ã™ã‚‹ã¨æƒ³å®šã—ã¦ã„ã¾ã—ãŸãŒã€ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å®Ÿè£…ã«ã‚ˆã‚ŠæˆåŠŸã—ã¾ã—ãŸï¼š

- æ­£å¸¸ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹
- ãƒ‡ã‚³ãƒ¼ãƒ‰æˆåŠŸæ™‚ã«ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹

ã“ã‚Œã¯å•é¡Œã§ã¯ãªãã€Greenãƒ•ã‚§ãƒ¼ã‚ºã§é©åˆ‡ã«å®Ÿè£…ã™ã‚Œã°OKã§ã™ã€‚

## Greenãƒ•ã‚§ãƒ¼ã‚ºã¸ã®ç§»è¡Œåˆ¤å®š

### å“è³ªè©•ä¾¡

âœ… **é«˜å“è³ª**

- ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ: æˆåŠŸï¼ˆæœŸå¾…é€šã‚Šã«å¤±æ•—ã™ã‚‹ã“ã¨ã‚’ç¢ºèªï¼‰
- æœŸå¾…å€¤: æ˜ç¢ºã§å…·ä½“çš„
- ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³: é©åˆ‡
- å®Ÿè£…æ–¹é‡: æ˜ç¢º

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

**æ¬¡ã®ãŠå‹§ã‚ã‚¹ãƒ†ãƒƒãƒ—**: `/tsumiki:tdd-green` ã§Greenãƒ•ã‚§ãƒ¼ã‚ºï¼ˆæœ€å°å®Ÿè£…ï¼‰ã‚’é–‹å§‹ã—ã¾ã™ã€‚

## å®Ÿè£…ã™ã¹ãå†…å®¹ï¼ˆGreenãƒ•ã‚§ãƒ¼ã‚ºï¼‰

### 1. DisplayPage.tsx ã®æ›´æ–°

#### å¿…è¦ãªimport
```typescript
import { useSearchParams, Navigate, useNavigate } from 'react-router-dom';
import { useState, useEffect } from 'react';
import { decodeGiftWordData } from '../utils/urlEncoder';
import Button from '../components/common/Button/Button';
import { GiftWordData } from '../types';
import styles from './DisplayPage.module.css';
```

#### çŠ¶æ…‹ç®¡ç†
- `data: GiftWordData | null`
- `error: string | null`
- `isLoading: boolean`

#### å‡¦ç†ãƒ•ãƒ­ãƒ¼
1. URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰dataã‚’å–å¾—
2. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒãªã‘ã‚Œã°Navigateã§ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
3. decodeGiftWordDataã§ãƒ‡ã‚³ãƒ¼ãƒ‰
4. ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Œã°errorçŠ¶æ…‹ã«ã‚»ãƒƒãƒˆ
5. æˆåŠŸã™ã‚Œã°dataçŠ¶æ…‹ã«ã‚»ãƒƒãƒˆ

### 2. DisplayPage.module.css ã®ä½œæˆ

å¿…è¦ãªã‚¯ãƒ©ã‚¹:
- `.container`: ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ
- `.loading`: ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
- `.content`: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢
- `.actions`: ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢

### 3. ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### BackgroundImageï¼ˆTASK-0028ã§è©³ç´°å®Ÿè£…ï¼‰
```typescript
const BackgroundImage = () => <div>Background Image Placeholder</div>;
```

#### VerticalTextDisplayï¼ˆTASK-0030ã§è©³ç´°å®Ÿè£…ï¼‰
```typescript
const VerticalTextDisplay = ({ word, meaning }: { word: string; meaning: string }) => (
  <div>
    <p>{word}</p>
    <p>{meaning}</p>
  </div>
);
```

### 4. ã‚¨ãƒ©ãƒ¼å‡¦ç†

- ã‚¨ãƒ©ãƒ¼æ™‚ã¯ `<div role="alert">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</div>` ã‚’è¡¨ç¤º
- TASK-0027ã§ErrorPageã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…å¾Œã€è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã«ç½®ãæ›ãˆ

## ã‚³ãƒ¼ãƒ‰è¨­è¨ˆï¼ˆè©³ç´°ï¼‰

### DisplayPage.tsx å®Ÿè£…ä¾‹

```typescript
const DisplayPage: React.FC = () => {
  const [searchParams] = useSearchParams();
  const navigate = useNavigate();
  const [data, setData] = useState<GiftWordData | null>(null);
  const [error, setError] = useState<string | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    const encodedData = searchParams.get('data');

    // REQ-212: URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒã‚§ãƒƒã‚¯
    if (!encodedData) {
      navigate('/', { replace: true });
      return;
    }

    // URLãƒ‡ã‚³ãƒ¼ãƒ‰
    const result = decodeGiftWordData(encodedData);

    if (!result.success || !result.data) {
      setError(result.error || 'ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ');
    } else {
      setData(result.data);
    }

    setIsLoading(false);
  }, [searchParams, navigate]);

  if (isLoading) {
    return (
      <div className={styles.loading}>
        <p>èª­ã¿è¾¼ã¿ä¸­...</p>
      </div>
    );
  }

  if (error || !data) {
    return (
      <div role="alert">
        <p>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</p>
        <p>{error}</p>
      </div>
    );
  }

  return (
    <div className={styles.container}>
      <BackgroundImage />

      <div className={styles.content}>
        <VerticalTextDisplay word={data.word} meaning={data.meaning} />
      </div>

      <div className={styles.actions}>
        <Button onClick={() => navigate('/')} variant="secondary">
          æ–°ã—ã„è¨€è‘‰ã‚’è´ˆã‚‹
        </Button>
      </div>
    </div>
  );
};
```

## ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸åˆ†æ

### è¦ä»¶ã‚«ãƒãƒ¬ãƒƒã‚¸

- âœ… REQ-212: URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¸åœ¨æ™‚ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- âœ… REQ-206: ã€Œæ–°ã—ã„è¨€è‘‰ã‚’è´ˆã‚‹ã€ãƒœã‚¿ãƒ³
- âœ… REQ-021: æ—¥æœ¬èªå¯¾å¿œ
- ğŸŸ¡ REQ-211: ä¸æ­£ãªURLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ï¼ˆTASK-0027ã§è©³ç´°å®Ÿè£…ï¼‰
- ğŸŸ¡ REQ-213: ãƒ‡ã‚³ãƒ¼ãƒ‰å¤±æ•—æ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆTASK-0027ã§è©³ç´°å®Ÿè£…ï¼‰

### æ©Ÿèƒ½ã‚«ãƒãƒ¬ãƒƒã‚¸

- âœ… URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å‡¦ç†: 100%
- âœ… ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³: 100%
- âœ… ãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³: 100%
- âœ… æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆå‡¦ç†: 100%
- âœ… ãƒ¡ãƒ¢ãƒªç®¡ç†: 100%

## æŠ€è¡“çš„ãªæ³¨æ„äº‹é …

### 1. React Routerè­¦å‘Š
ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚ã«ä»¥ä¸‹ã®è­¦å‘ŠãŒè¡¨ç¤ºã•ã‚Œã¾ã™ãŒã€æ©Ÿèƒ½ã«ã¯å½±éŸ¿ã‚ã‚Šã¾ã›ã‚“ï¼š
- `v7_startTransition` future flag
- `v7_relativeSplatPath` future flag

å¿…è¦ã«å¿œã˜ã¦BrowserRouterã®è¨­å®šã§å¯¾å¿œå¯èƒ½ã§ã™ã€‚

### 2. CSS Modules
ã‚¯ãƒ©ã‚¹åã¯è‡ªå‹•çš„ã«ãƒãƒƒã‚·ãƒ¥åŒ–ã•ã‚Œã‚‹ãŸã‚ã€ãƒ†ã‚¹ãƒˆã§ã¯ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã§ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ï¼š
- `className={styles.container}`ã§é©ç”¨
- `querySelector('[class*="container"]')`ã§æ¤œç´¢

### 3. ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
BackgroundImageã¨VerticalTextDisplayã¯ã€TASK-0028, TASK-0030ã§å®Œå…¨å®Ÿè£…ã™ã‚‹ãŸã‚ã€Greenãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…ã§OKã€‚

## ã¾ã¨ã‚

Redãƒ•ã‚§ãƒ¼ã‚ºã¯æˆåŠŸã—ã¾ã—ãŸã€‚11å€‹ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ã†ã¡5å€‹ãŒæœŸå¾…é€šã‚Šã«å¤±æ•—ã—ã€TDDã‚µã‚¤ã‚¯ãƒ«ã‚’é–‹å§‹ã™ã‚‹æº–å‚™ãŒæ•´ã„ã¾ã—ãŸã€‚

æ¬¡ã®Greenãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ã€æœ€å°é™ã®å®Ÿè£…ã§ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’é€šéã•ã›ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚
